(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1d50":function(e,t,n){"use strict";n.r(t);var o=n("ae95"),a=n("4dc7");for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("a12b");var c,i=n("f0c5"),u=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);t["default"]=u.exports},"28e5":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("a34a"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,o,a,s,c){try{var i=e[s](c),u=i.value}catch(r){return void n(r)}i.done?t(u):Promise.resolve(u).then(o,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var c=e.apply(t,n);function i(e){s(c,o,a,i,u,"next",e)}function u(e){s(c,o,a,i,u,"throw",e)}i(void 0)}))}}var i=[["camera"],["album"],["camera","album"]],u=[["compressed"],["original"],["compressed","original"]],r={data:function(){return{title:"choose/previewImage",imageList:[],resultUrl:"",sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],hasUpLoad:!1,hasChecked:!1,chosenDataSet:0,chosenLoss:0,dataSets:[{text:"EX",value:0},{text:"MA",value:1},{text:"MA_PRO",value:2}],lossSets:[{text:"BCE",value:0},{text:"Focal",value:1}]}},methods:{downLoadImage:function(){e.downloadFile({url:"",success:function(t){200===t.statusCode&&e.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(){e.showToast({title:"保存成功",icon:"none"})},fail:function(){e.showToast({title:"保存失败",icon:"none"})}})}})},getDataSet:function(e){return 0===e?"EX":1===e?"MA":"MA_PRO"},getLoss:function(e){return 0===e?"BCE":"Focal"},testImage:function(){this.upLoadImage(),this.hasChecked=!0},upLoadImage:function(){var t=this,n=e.uploadFile({url:"http://100.64.252.67:8001/getAnnotation?dataset=".concat(this.getDataSet(this.chosenDataSet),"&loss=").concat(this.getLoss(this.chosenLoss)),filePath:this.imageList[0],name:"file",formData:{name:"image"},success:function(n){console.log(n),t.resultUrl=n.data,t.hasUpLoad=!0,t.hasChecked=!0,e.showModal({title:"",content:"检测成功！",success:function(e){},fail:function(){},complete:function(){}})}});n.onProgressUpdate((function(e){console.log("上传进度"+e.progress),console.log("已经上传的数据长度"+e.totalBytesSent),console.log("预期需要上传的数据总长度"+e.totalBytesExpectedToSend),e.progress>300&&n.abort()}))},chooseImage:function(){var t=c(o.default.mark((function t(){var n,a=this;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==this.imageList.length){t.next=7;break}return t.next=3,this.isFullImg();case 3:if(n=t.sent,console.log("是否继续?",n),n){t.next=7;break}return t.abrupt("return");case 7:e.chooseImage({sourceType:i[this.sourceTypeIndex],sizeType:u[this.sizeTypeIndex],count:1,success:function(t){a.hasUpLoad=!0,a.imageList=a.imageList.concat(t.tempFilePaths),a.hasChecked=!1,e.showModal({title:"",content:"添加成功！",success:function(e){},fail:function(){},complete:function(){}})},fail:function(e){console.log("err: ",e)}});case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),isFullImg:function(){var t=this;return new Promise((function(n){e.showModal({content:"是否清空现有图片？",success:function(e){e.confirm?(t.imageList=[],n(!0)):n(!1)},fail:function(){n(!1)}})}))},previewImage:function(t){console.log(t);var n=t.target.dataset.src;e.previewImage({urls:[n]})}}};t.default=r}).call(this,n("543d")["default"])},"4dc7":function(e,t,n){"use strict";n.r(t);var o=n("28e5"),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},a12b:function(e,t,n){"use strict";var o=n("ae6e"),a=n.n(o);a.a},ae6e:function(e,t,n){},ae95:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={uniDataCheckbox:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox")]).then(n.bind(null,"c23a"))}},a=function(){var e=this,t=e.$createElement;e._self._c},s=[]},cfc5:function(e,t,n){"use strict";(function(e){n("b528");o(n("66fd"));var t=o(n("1d50"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["cfc5","common/runtime","common/vendor"]]]);